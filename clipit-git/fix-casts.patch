diff --color -ru clipit.ORIG/src/keybinder.c clipit/src/keybinder.c
--- clipit.ORIG/src/keybinder.c	2025-01-11 01:15:13.844491784 -0800
+++ clipit/src/keybinder.c	2025-01-11 01:15:16.967880634 -0800
@@ -310,7 +310,7 @@
 	gboolean retval = FALSE;
 
 	mod_keymap = XGetModifierMapping (
-	    GDK_WINDOW_XDISPLAY(gdk_display_get_default()));
+	    gdk_x11_display_get_xdisplay (gdk_display_get_default()));
 
 	map_size = 8 * mod_keymap->max_keypermod;
 
diff --color -ru clipit.ORIG/src/main.c clipit/src/main.c
--- clipit.ORIG/src/main.c	2025-01-11 01:15:13.844491784 -0800
+++ clipit/src/main.c	2025-01-11 01:15:20.027934996 -0800
@@ -615,7 +615,7 @@
   pango_attr_list_insert (attr_list, underline);
 
   GtkWidget* gtk_label = gtk_bin_get_child (GTK_BIN (menu_item));
-  gtk_label_set_attributes (gtk_label, attr_list);
+  gtk_label_set_attributes (GTK_LABEL (gtk_label), attr_list);
 }
 
 /*
@@ -638,7 +638,7 @@
     append_to_input_buffer(event->string);
 
   GtkMenuShell* menu = (GtkMenuShell *) history_menu;
-  GList* element = gtk_container_get_children(menu);
+  GList* element = gtk_container_get_children(GTK_CONTAINER (menu));
   GtkMenuItem *menu_item, *first_match = 0;
 
   const gchar* menu_label;
@@ -657,9 +657,9 @@
         first_match = menu_item;
       match_count++;
       underline_match(match, menu_item, menu_label);
-      gtk_widget_set_sensitive(menu_item, true);
+      gtk_widget_set_sensitive(GTK_WIDGET (menu_item), true);
     } else {
-      gtk_widget_set_sensitive(menu_item, false);
+      gtk_widget_set_sensitive(GTK_WIDGET (menu_item), false);
     }
     element = element->next;
     count++;
@@ -667,7 +667,7 @@
 
   if (first_match && match_count != prefs.items_menu) {
     gtk_menu_item_select(first_match);
-	gtk_menu_shell_select_item(menu, first_match);
+	gtk_menu_shell_select_item( GTK_MENU_SHELL(menu), GTK_WIDGET (first_match));
     return TRUE;
   }
   return FALSE;
diff --color -ru clipit.ORIG/src/preferences.c clipit/src/preferences.c
--- clipit.ORIG/src/preferences.c	2025-01-11 01:15:13.844491784 -0800
+++ clipit/src/preferences.c	2025-01-11 01:15:18.687911193 -0800
@@ -723,7 +723,7 @@
             *alignment, *hbox,
             *vbox;
 
-  GtkWidget *adjustment, *adjustment_small, *adjustment_statics;
+  GtkAdjustment *adjustment, *adjustment_small, *adjustment_statics;
   GtkTreeViewColumn *tree_column;
 
   /* Create the dialog */
@@ -898,9 +898,9 @@
   gtk_misc_set_alignment((GtkMisc*)label, 0.0, 0.50);
   gtk_box_pack_start((GtkBox*)hbox, label, FALSE, FALSE, 0);
   ellipsize_combo = gtk_combo_box_text_new();
-  gtk_combo_box_text_append_text((GtkComboBox*)ellipsize_combo, _("Beginning"));
-  gtk_combo_box_text_append_text((GtkComboBox*)ellipsize_combo, _("Middle"));
-  gtk_combo_box_text_append_text((GtkComboBox*)ellipsize_combo, _("End"));
+  gtk_combo_box_text_append_text((GtkComboBoxText*)ellipsize_combo, _("Beginning"));
+  gtk_combo_box_text_append_text((GtkComboBoxText*)ellipsize_combo, _("Middle"));
+  gtk_combo_box_text_append_text((GtkComboBoxText*)ellipsize_combo, _("End"));
   gtk_box_pack_start((GtkBox*)hbox, ellipsize_combo, FALSE, FALSE, 0);
   gtk_box_pack_start((GtkBox*)vbox_history, frame, FALSE, FALSE, 0);
 
